@Library('JenkinssharedLibraries') _
pipeline{
  agent any 
  tools {
    maven "maven3.8.6"
  }
  stages{  
    stage('1GetCode'){
      steps{
        sh "echo 'cloning the latest application version' "
        git "https://github.com/elvis-ngeh/maven-web-application"
      }
    }
  stage('Build'){
  steps{
      common("Build")
  }
}
stage('SonarqubeReport'){
    steps{
        common("SonarqubeReport")
    }
}
stage('Upload to Nexus'){
    steps{
        common("Upload to Nexus")
    }
}
stage('5deploy2Dev'){
    steps{
        sh "echo 'test app on Devapptest' "
        deploy adapters: [tomcat9(credentialsId: 'tomcat-credentials', path: '', url: 'http://10.0.1.148:8080/')], contextPath: null, war: 'target/*war'

   }
}
stage ('6approvalGate'){
    steps{
       echo " 'ready for review' "
       timeout(time:5, unit:'DAYS') {
       input message: 'Application ready for deployment, Please review and approve'
   }
}

}
}


